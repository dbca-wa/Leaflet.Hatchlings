# Leaflet.Hatchlings
A Leaflet plugin to visualize turtle hatchling track fans


## Purpose
This plugin visualizes the tracks in the sand around turtle nests left by turtle hatchlings after their nest emergence.
The shape and orientation of these tells us whether hatchlings did find their way to sea, or got disoriented.
While the bulk of the tracks form a single fan (circular segment), some particularly lost hatchlings leave outlier tracks.
The main culprit of misorientation are external light sources.

### Data
Data is required as produced or provided by the R package `wastdr` of class
[`wastd_data`](https://dbca-wa.github.io/wastdr/reference/download_wastd_turtledata.html).

```{r}
library(wastdr)
data("wastd_data", package="wastdr")

R> dplyr::glimpse(wastd_data$nest_fans)
Rows: 1,000
Columns: 69
$ pk                                  <int> 199912, 199904, 199905, 199908, 199909, 199910, 187919, 199911, 199717, 175314, 1…
$ source                              <int> 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ source_id                           <chr> "uuid:8128b801-5b80-4211-b2b1-c5c6818811e9", "uuid:adfcb095-2a18-4376-abaa-f0a3bb…
$ encounter_pk                        <int> 182627, 182600, 182601, 182614, 182615, 182617, 166166, 182620, 181489, 121868, 1…
$ encounter_area_pk                   <int> 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 19, 13, 13, 13, 13, 13, 19, 13, 19, 13, 1…
$ encounter_area_area_type            <chr> "Locality", "Locality", "Locality", "Locality", "Locality", "Locality", "Locality…
$ encounter_area_name                 <chr> "Port Hedland", "Port Hedland", "Port Hedland", "Port Hedland", "Port Hedland", "…
$ encounter_site_pk                   <int> 35, 35, 35, 35, 35, 35, 35, 35, 45, 35, 22, 35, 35, 35, 35, 35, 24, 35, 23, 35, 4…
$ encounter_site_area_type            <chr> "Site", "Site", "Site", "Site", "Site", "Site", "Site", "Site", "Site", "Site", "…
$ encounter_site_name                 <chr> "Port Hedland Cemetery Beach", "Port Hedland Cemetery Beach", "Port Hedland Cemet…
$ encounter_survey_id                 <int> 7934, 7927, 7927, 7929, 7929, 7929, 5634, 7929, 7658, 2255, 6778, 5048, 5134, 516…
$ encounter_survey_start_time         <chr> "2010-03-22T19:41:37+08:00", "2021-01-03T05:58:41+08:00", "2021-01-03T05:58:41+08…
$ encounter_survey_end_time           <chr> "2010-03-22T22:06:40+08:00", "2021-01-03T09:07:43+08:00", "2021-01-03T09:07:43+08…
$ encounter_survey_start_comments     <chr> ...
$ encounter_survey_end_comments       <chr> ...
$ encounter_survey_absolute_admin_url <chr> "/admin/observations/survey/7934/change/", "/admin/observations/survey/7927/chang…
$ encounter_survey_production         <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…
$ encounter_name                      <chr> "_2020-12-28_A005", "_2021-01-03_013B", "_2021-01-03_012B", "_2020-12-29_B009", "…
$ encounter_observer_pk               <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_observer_username         <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_observer_name             <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_pk               <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_username         <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_name             <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_comments                  <chr> "Device ID d0:f8:8c:77:cb:6d", "Device ID d0:f8:8c:77:cb:6d", "Device ID d0:f8:8c…
$ encounter_status                    <chr> "new", "new", "new", "new", "new", "new", "curated", "new", "new", "new", "new", …
$ encounter_source                    <chr> "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk…
$ encounter_source_id                 <chr> "uuid:8128b801-5b80-4211-b2b1-c5c6818811e9", "uuid:adfcb095-2a18-4376-abaa-f0a3bb…
$ encounter_encounter_type            <chr> "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "…
$ encounter_when                      <chr> "2010-03-22T20:23:47+08:00", "2021-01-03T06:54:13+08:00", "2021-01-03T06:49:15+08…
$ encounter_leaflet_title             <chr> "2010-03-22 12:23:47+00:00 Nest _2020-12-28_A005", "2021-01-02 22:54:13+00:00 Nes…
$ encounter_location_accuracy         <chr> "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10…
$ encounter_location_accuracy_m       <dbl> 5.000, 4.600, 4.700, 5.000, 4.400, 4.400, 3.216, 4.200, 4.288, NA, 4.288, 3.216, …
$ encounter_latitude                  <dbl> -20.30689, -20.30671, -20.30674, -20.30664, -20.30662, -20.30683, -20.30685, -20.…
$ encounter_longitude                 <dbl> 118.6125, 118.6140, 118.6139, 118.6149, 118.6142, 118.6132, 118.6133, 118.6118, 1…
$ encounter_crs                       <chr> "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "…
$ encounter_absolute_admin_url        <chr> "/admin/observations/turtlenestencounter/182627/change/", "/admin/observations/tu…
$ bearing_to_water_degrees            <dbl> 345, 340, 338, NA, 350, 335, 340, 350, 10, NA, 1, 323, 332, 341, 329, 162, 280, 3…
$ bearing_leftmost_track_degrees      <dbl> 250, 275, 260, 315, 210, 260, 323, 250, 352, NA, NA, 305, 302, 248, 338, 327, 250…
$ bearing_rightmost_track_degrees     <dbl> 60, 65, 70, 30, 90, 70, 22, 60, 37, NA, NA, 338, 332, 63, 23, 28, 300, 36, NA, 5,…
$ no_tracks_main_group                <int> 20, 26, 33, 17, 23, 33, 8, 43, 11, 1, 20, 6, 4, 5, 10, 6, 14, 10, NA, 4, NA, 16, …
$ no_tracks_main_group_min            <int> 12, 20, 33, 17, 20, 20, 8, 28, 9, NA, 10, 6, NA, 5, 6, 6, 14, 6, NA, 4, 22, 14, 2…
$ no_tracks_main_group_max            <int> 12, 20, 33, 17, 20, 20, 8, 28, 11, NA, NA, 6, NA, 5, 12, 10, 17, 12, NA, 4, 28, 1…
$ outlier_tracks_present              <chr> "na", "na", "na", "na", "na", "na", "absent", "na", "absent", "absent", "na", "ab…
$ hatchling_emergence_time_known      <chr> "no", "no", "no", "no", "no", "no", "no", "no", "no", "no", "no", "no", "no", "no…
$ light_sources_present               <chr> "na", "na", "na", "na", "na", "na", "na", "na", "na", "na", "absent", "na", "na",…
$ hatchling_emergence_time_accuracy   <chr> "na", "na", "na", "na", "na", "na", "na", "na", "na", NA, "na", "na", "na", "na",…
$ path_to_sea_comments                <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, "clear None", NA, NA, NA, NA, NA, NA, "Multip…
$ cloud_cover_at_emergence            <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 6, NA, NA, NA, NA…
$ hatchling_emergence_time            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ datetime                            <dttm> 2010-03-22 20:23:47, 2021-01-03 06:54:13, 2021-01-03 06:49:15, 2020-12-29 07:28:…
$ calendar_date_awst                  <chr> "2010-03-22", "2021-01-03", "2021-01-03", "2020-12-29", "2020-12-29", "2020-12-29…
$ turtle_date                         <date> 2010-03-22, 2021-01-02, 2021-01-02, 2020-12-28, 2020-12-28, 2020-12-28, 2019-12-…
$ season                              <dbl> 2009, 2020, 2020, 2020, 2020, 2020, 2019, 2020, 2020, 2018, 2019, 2019, 2019, 201…
$ season_week                         <dbl> 38, 27, 27, 27, 27, 27, 24, 27, 25, 25, 29, 28, 28, 27, 27, 27, 26, 27, 24, 27, 2…
$ iso_week                            <dbl> 12, 53, 53, 53, 53, 53, 50, 53, 51, 51, 3, 2, 2, 1, 1, 1, 52, 1, 50, 53, 52, 51, …
$ nest_age                            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_type                           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ species                             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ habitat                             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ disturbance                         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_tagged                         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ logger_found                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ eggs_counted                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ hatchlings_measured                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ fan_angles_measured                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ absolute_admin_url                  <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ species_colours                     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_type_text                      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…


R> dplyr::glimpse(wastd_data$nest_fan_outliers)
Rows: 251
Columns: 59
$ pk                                  <int> 177685, 176980, 197288, 197289, 181946, 181947, 181948, 181949, 181950, 181951, 1…
$ source                              <int> 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ source_id                           <chr> "280ed802-d6b8-11ea-bea6-6920194a4594", "280ed802-d6b8-11ea-bea6-6920194a4594", "…
$ encounter_pk                        <int> 142555, 144091, 174385, 174385, 160531, 163125, 164361, 164925, 165676, 165899, 1…
$ encounter_area_pk                   <int> 17, 17, 13, 13, 17, 13, 13, 38, 38, 13, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 1…
$ encounter_area_area_type            <chr> "Locality", "Locality", "Locality", "Locality", "Locality", "Locality", "Locality…
$ encounter_area_name                 <chr> "Thevenard Island", "Thevenard Island", "Port Hedland", "Port Hedland", "Thevenar…
$ encounter_survey_id                 <int> 4396, 3473, 7283, 7283, 6783, 5359, 5468, 6686, 6666, 5618, 3932, 3932, 3932, 393…
$ encounter_survey_start_time         <chr> "2019-01-08T16:24:46.467000+08:00", "2019-02-12T20:21:30.888000+08:00", "2020-11-…
$ encounter_survey_end_time           <chr> "2019-01-09T06:00:59.454000+08:00", "2019-02-13T07:05:33.872000+08:00", "2020-11-…
$ encounter_survey_start_comments     <chr> "[QA][AUTO] Reconstructed by WAStD from TurtleNestEncounters without surveys.", "…
$ encounter_survey_absolute_admin_url <chr> "/admin/observations/survey/4396/change/", "/admin/observations/survey/3473/chang…
$ encounter_survey_production         <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…
$ encounter_survey_end_comments       <chr> NA, NA, "NA\nEnd point recorded by Jules Prins  on device 0b39fe33bd6e098c.", "NA…
$ encounter_name                      <chr> "__EG1", "NONE__F62", NA, NA, NA, "__115", "__N006", NA, NA, "__041", NA, NA, NA,…
$ encounter_observer_pk               <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_observer_username         <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_observer_name             <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_pk               <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_username         <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_name             <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_comments                  <chr> "[guess_user][OK] Exact match for name Erin Sawtell is Erin Sawtell.", "[guess_us…
$ encounter_status                    <chr> "proofread", "new", "new", "new", "new", "new", "new", "new", "new", "new", "new"…
$ encounter_source                    <chr> "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk…
$ encounter_source_id                 <chr> "uuid:eb8f56a2-4645-456f-a18f-ba4381d8fbdc", "uuid:21e82380-9a3a-4397-8a3d-25f1a6…
$ encounter_encounter_type            <chr> "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "…
$ encounter_when                      <chr> "2019-01-08T16:59:25+08:00", "2019-02-12T21:31:15.745000+08:00", "2020-11-15T06:3…
$ encounter_leaflet_title             <chr> "2019-01-08 08:59:25+00:00 Nest __EG1", "2019-02-12 13:31:15.745000+00:00 Nest NO…
$ encounter_location_accuracy         <chr> "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10…
$ encounter_latitude                  <dbl> -21.46085, -21.46090, -20.30693, -20.30693, -21.46278, -20.30668, -20.31619, -20.…
$ encounter_longitude                 <dbl> 115.0223, 115.0240, 118.6123, 118.6123, 115.0206, 118.6135, 118.6523, 117.1533, 1…
$ encounter_crs                       <chr> "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "…
$ encounter_absolute_admin_url        <chr> "/admin/observations/turtlenestencounter/142555/change/", "/admin/observations/tu…
$ encounter_site_pk                   <int> NA, 20, 35, 35, 20, 35, 45, 25, 25, 35, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 2…
$ encounter_site_area_type            <chr> NA, "MPA", "Site", "Site", "MPA", "Site", "Site", "Site", "Site", "Site", "MPA", …
$ encounter_site_name                 <chr> NA, "Thevenard Island tagging area 2016", "Port Hedland Cemetery Beach", "Port He…
$ encounter_location_accuracy_m       <dbl> NA, NA, 3.216, 3.216, 4.288, 4.288, 3.216, 5.000, 4.000, 4.288, NA, NA, NA, NA, N…
$ bearing_outlier_track_degrees       <dbl> 12, 260, 191, 92, 222, 174, 288, 5, 356, 215, 112, 142, 66, 87, 183, 97, 209, 224…
$ outlier_group_size                  <int> 1, 1, 7, 4, 1, 3, 1, 1, 1, 1, 1, 2, 2, 2, 1, 2, 1, 2, 3, 1, 1, 1, 1, 1, 2, 2, 1, …
$ outlier_track_comment               <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "Windy fade t…
$ datetime                            <dttm> 2019-01-08 16:59:25, 2019-02-12 21:31:15, 2020-11-15 06:37:13, 2020-11-15 06:37:…
$ calendar_date_awst                  <chr> "2019-01-08", "2019-02-12", "2020-11-15", "2020-11-15", "2020-01-22", "2019-12-28…
$ turtle_date                         <date> 2019-01-08, 2019-02-12, 2020-11-14, 2020-11-14, 2020-01-22, 2019-12-27, 2019-12-…
$ season                              <dbl> 2018, 2018, 2020, 2020, 2019, 2019, 2019, 2019, 2019, 2019, 2017, 2017, 2017, 201…
$ season_week                         <dbl> 28, 33, 20, 20, 30, 26, 26, 25, 25, 24, 31, 31, 31, 31, 31, 31, 31, 31, 31, 31, 3…
$ iso_week                            <dbl> 2, 7, 46, 46, 4, 52, 52, 51, 51, 50, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,…
$ nest_age                            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_type                           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ species                             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ habitat                             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ disturbance                         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_tagged                         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ logger_found                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ eggs_counted                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ hatchlings_measured                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ fan_angles_measured                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ absolute_admin_url                  <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ species_colours                     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_type_text                      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…

R> dplyr::glimpse(wastd_data$nest_lightsources)
Rows: 611
Columns: 59
$ pk                                  <int> 176484, 176487, 176488, 176489, 176493, 176494, 176498, 176503, 176504, 176507, 1…
$ source                              <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ source_id                           <chr> "280ed802-d6b8-11ea-bea6-6920194a4594", "280ed802-d6b8-11ea-bea6-6920194a4594", "…
$ encounter_pk                        <int> 142501, 142524, 142524, 142524, 142525, 142525, 142526, 142528, 142528, 142529, 1…
$ encounter_area_pk                   <int> 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 18, 17, 13, 13, 13, 13, 17, 17, 17, 1…
$ encounter_area_area_type            <chr> "Locality", "Locality", "Locality", "Locality", "Locality", "Locality", "Locality…
$ encounter_area_name                 <chr> "Thevenard Island", "Thevenard Island", "Thevenard Island", "Thevenard Island", "…
$ encounter_site_pk                   <int> 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 33, 30, 35, 35, 35, 35, 20, 20, 20, 2…
$ encounter_site_area_type            <chr> "MPA", "MPA", "MPA", "MPA", "MPA", "MPA", "MPA", "MPA", "MPA", "MPA", "MPA", "Sit…
$ encounter_site_name                 <chr> "Thevenard Island tagging area 2016", "Thevenard Island tagging area 2016", "Thev…
$ encounter_survey_id                 <int> 4427, 3300, 3300, 3300, 3300, 3300, 3300, 3303, 3303, 3303, 3303, 4385, 4384, 867…
$ encounter_survey_start_time         <chr> "2019-01-12T22:04:32.415000+08:00", "2019-01-13T21:50:33.455000+08:00", "2019-01-…
$ encounter_survey_end_time           <chr> "2019-01-13T05:34:45.117000+08:00", "2019-01-14T04:35:07.124000+08:00", "2019-01-…
$ encounter_survey_start_comments     <chr> "[QA][AUTO] Reconstructed by WAStD from TurtleNestEncounters without surveys.", "…
$ encounter_survey_absolute_admin_url <chr> "/admin/observations/survey/4427/change/", "/admin/observations/survey/3300/chang…
$ encounter_survey_production         <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…
$ encounter_survey_end_comments       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "NA\nEnd point recorded by Ki…
$ encounter_name                      <chr> "__T11", "__T11", "__T11", "__T11", "__T13", "__T13", "__T14", "__T12", "__T12", …
$ encounter_observer_pk               <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_observer_username         <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_observer_name             <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_pk               <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_username         <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_reporter_name             <chr> "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name hidden", "Name …
$ encounter_comments                  <chr> "[guess_user][OK] Exact match for username sam_clarke is Sam Clarke.", "[guess_us…
$ encounter_status                    <chr> "new", "new", "new", "new", "new", "new", "new", "new", "new", "new", "new", "new…
$ encounter_source                    <chr> "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk", "odk…
$ encounter_source_id                 <chr> "uuid:dff6c8ff-abb2-46d6-b764-9f6b5916d167", "uuid:e3038afa-7e62-41eb-a632-21d6f6…
$ encounter_encounter_type            <chr> "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "nest", "…
$ encounter_when                      <chr> "2019-01-13T05:04:45.117000+08:00", "2019-01-13T22:20:33.455000+08:00", "2019-01-…
$ encounter_leaflet_title             <chr> "2019-01-12 21:04:45.117000+00:00 Nest __T11", "2019-01-13 14:20:33.455000+00:00 …
$ encounter_location_accuracy         <chr> "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10", "10…
$ encounter_latitude                  <dbl> -21.46092, -21.46223, -21.46223, -21.46223, -21.46110, -21.46110, -21.46085, -21.…
$ encounter_longitude                 <dbl> 115.0234, 115.0215, 115.0215, 115.0215, 115.0226, 115.0226, 115.0238, 115.0214, 1…
$ encounter_crs                       <chr> "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "WGS 84", "…
$ encounter_absolute_admin_url        <chr> "/admin/observations/turtlenestencounter/142501/change/", "/admin/observations/tu…
$ encounter_location_accuracy_m       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4.630, 4.931, 4.990, 4.990, N…
$ bearing_light_degrees               <dbl> 236, 194, 261, 285, 182, 239, 235, 147, 187, 256, 187, 50, 58, 118, 201, 192, 0, …
$ light_source_type                   <chr> "artificial", "artificial", "artificial", "natural", "artificial", "artificial", …
$ light_source_description            <chr> "Chevron jetty lease", "Wheatstone flame", "Jetty lease Chevron rig", "Moon", "Wh…
$ datetime                            <dttm> 2019-01-13 05:04:45, 2019-01-13 22:20:33, 2019-01-13 22:20:33, 2019-01-13 22:20:…
$ calendar_date_awst                  <chr> "2019-01-13", "2019-01-13", "2019-01-13", "2019-01-13", "2019-01-14", "2019-01-14…
$ turtle_date                         <date> 2019-01-12, 2019-01-13, 2019-01-13, 2019-01-13, 2019-01-13, 2019-01-13, 2019-01-…
$ season                              <dbl> 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 202…
$ season_week                         <dbl> 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 28, 28, 28, 27, 27, 27, 29, 29, 29, 2…
$ iso_week                            <dbl> 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, …
$ nest_age                            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_type                           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ species                             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ habitat                             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ disturbance                         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_tagged                         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ logger_found                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ eggs_counted                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ hatchlings_measured                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ fan_angles_measured                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ absolute_admin_url                  <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ species_colours                     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ nest_type_text                      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
```

Key columns and context:

* The subject are hatched turtle nests, which show the tracks of hatchlings which already have left the nest.
* The turtle nests are located at WGS84 `encounter_latitude` and `encounter_longitude` with accuracy `encounter_location_accuracy_m`.
* The turtle nests were encountered by a human observer on `encounter_when`, an ISO8601 timestamp in local time (AWST, GMT+08).
* If `hatchling_emergence_time_known`, there is a `hatchling_emergence_time` estimate with a `hatchling_emergence_time_accuracy` accuracy.
* There can be a `cloud_cover_at_emergence`.
* The nests were made by `species`.
* Most hatchling tracks cover a circle segment around the nest with the nest in the centre of the circle. This is called the "fan".
* The observer measures a bunch of bearings (as degrees) with a hand-held compass as seen from the nest.
* The main fan is delimited by `bearing_leftmost_track_degrees` and `bearing_rightmost_track_degrees`.
* The direction to the nearest waterline is measured as `bearing_to_water_degrees`. We hope most hatchlings follow that direction!
* The fan contains `no_tracks_main_group` tracks, which is an estimate between `no_tracks_main_group_min` and `no_tracks_main_group_max`.
* Individual tracks of misoriented hatchlings are called outliers, and we have `outlier_tracks_present`.
* If the path to sea was blocked or otherwise not flat and even, there can be `path_to_sea_comments`.

We want to visualise the above data as:

For each main hatchling fan, e.g. in `nest_fans`
* A point denoting the nest:
  * coordinates `encounter_longitude`, `encounter_latitude`.
  * Colour denoting species.
  * The point should be large enough to be visible (2 pt-ish).
* A line denoting the recorded `bearing_to_water_degrees` :
  * from the nest with a length of XX.
* A circle section centered on the nest denoting the fan:
  * Boundaries `bearing_leftmost_track_degrees` to `bearing_rightmost_track_degrees`. These could straddle the 360/0 degree line.
  * A transparent filling and slim boundary lines, configurable.
* A label: `no_tracks_main_group` (`no_tracks_main_group_min` -- `no_tracks_main_group_max`) hatchling tracks.
* A popup with the remaining details.


For each outlier track, e.g. in `nest_fan_outliers`:
* A line from  `encounter_longitude`, `encounter_latitude` with
* length XX,
* weight XX,
* direction `bearing_outlier_track_degrees`,
* label `outlier_group_size` (as bubble at the end of the line?),
* popup `outlier_track_comment`.

For each know light source, e.g. in `nest_lightsources`:
* A bright yellow line starting at the nest `encounter_longitude`, `encounter_latitude`
* direction `bearing_light_degrees`
* label `light_source_type`
* popup `light_source_description`

## Requirements
* Leaflet
* Data as described above

## Demos
TBA

## Installation
TBA

## Example code
TBA

## API reference
TBA


